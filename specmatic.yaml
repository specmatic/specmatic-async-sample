version: 3
systemUnderTest:
  service:
    $ref: "#/components/services/orderAsyncService"
    runOptions:
      $ref: "#/components/runOptions/orderAsyncServiceTest"
    data:
      examples:
        - directories:
            - examples
components:
  sources:
    specmaticOrderContracts:
      filesystem:
        directory: .
  services:
    orderAsyncService:
      definitions:
        - definition:
            source:
              $ref: "#/components/sources/specmaticOrderContracts"
            specs:
              - spec/spec.yaml
  runOptions:
    orderAsyncServiceTest:
      asyncapi:
        type: test
        servers:
          - host: http://localhost:4566/000000000000
            protocol: sqs
            adminCredentials:
              region: us-east-1
              aws.access.key.id: test
              aws.secret.access.key: test
          - host: tcp://localhost:61616
            protocol: jms
            adminCredentials:
              username: admin
              password: admin
          # Reference only (pending Specmatic support for protocol: ibmmq)
          # Example shape for future IBM MQ config:
          # - host: tcp://localhost:1415
          #   protocol: ibmmq
          #   adminCredentials:
          #     queueManager: QM1
          #     channel: DEV.ADMIN.SVRCONN
          #     connName: localhost(1415)
          #     username: admin
          #     password: passw0rd
          #   producerProperties:
          #     queueManager: QM1
          #     channel: DEV.APP.SVRCONN
          #     connName: localhost(1415)
          #     username: app
          #     password: passw0rd
          #   consumerProperties:
          #     queueManager: QM1
          #     channel: DEV.APP.SVRCONN
          #     connName: localhost(1415)
          #     username: app
          #     password: passw0rd
